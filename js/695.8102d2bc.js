"use strict";(self["webpackChunkdaily"]=self["webpackChunkdaily"]||[]).push([[695],{695:function(t,e,l){l.r(e),l.d(e,{default:function(){return te}});var a=l(3396),n=l(7139),i=l(9242);const o=t=>((0,a.dD)("data-v-43d2a01e"),t=t(),(0,a.Cn)(),t),s={key:0,class:"myContainer",id:"wayBackTop"},r={class:"row"},c=o((()=>(0,a._)("div",{class:"col-2"},null,-1))),d={class:"col-6"},u={class:"article-show-padding"},m={style:{"padding-left":"2vw","padding-top":"3vh"}},h=o((()=>(0,a._)("br",null,null,-1))),g=["data-content"],_=["data-content"],w={style:{"text-align":"center"}},y={class:"col-2"},p={class:"article-side-padding",style:{opacity:"0.99"}},k={key:0,class:"right-tag-padding"},v=o((()=>(0,a._)("p",{style:{"text-align":"center"}},"文章标签",-1))),f=o((()=>(0,a._)("br",null,null,-1))),x=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1))),b={class:"right-toc-padding"},D=o((()=>(0,a._)("p",{style:{"text-align":"center"}},"目录导航",-1))),z=["onClick"],I={href:"#",style:{"font-size":"medium"}},C=o((()=>(0,a._)("a",{style:{"text-decoration":"underline","font-size":"large"},href:"#wayBackTop"},[(0,a._)("code",null,"回到顶部")],-1))),T=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1))),U={key:1,class:"right-article-padding"},A=o((()=>(0,a._)("p",{style:{"text-align":"center"}},"作者文章",-1))),Z={style:{"padding-left":"1vw"}},H=["onClick"],q={style:{"font-size":"small"}},$=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1))),B={key:2,class:"right-comment-padding"},W=o((()=>(0,a._)("p",{style:{"text-align":"center"}},"评论",-1))),Y={style:{"font-size":"8px"}},K=o((()=>(0,a._)("br",null,null,-1))),S={key:0,style:{color:"#3c0ac5","font-size":"12px"}},j=o((()=>(0,a._)("kbd",{style:{color:"rgb(231, 136, 141)"}},"我",-1))),M={key:1,style:{color:"#3c0ac5","font-size":"12px"}},N={style:{color:"rgb(244, 247, 247)"}},F={style:{"font-size":"12px"}},V=["onClick"],E={key:3},G=o((()=>(0,a._)("div",{class:"col-2"},"   ",-1))),L={key:1,class:"myContainer",id:"wayBackTop"},O={style:{"padding-left":"5vw","padding-right":"1vw","max-height":"200px","overflow-y":"auto"}},P=o((()=>(0,a._)("p",{style:{"text-align":"center"}},"目录导航",-1))),J=["onClick"],Q={href:"#",style:{"font-size":"medium"}},R=o((()=>(0,a._)("a",{style:{"text-decoration":"underline","font-size":"large"},href:"#wayBackTop"},[(0,a._)("code",null,"回到顶部")],-1))),X=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1))),tt={style:{"padding-left":"5vw","padding-right":"5vw"}},et=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1))),lt={class:"",style:{padding:"1vw",opacity:"0.99"}},at={class:"card"},nt={class:"card-body"},it={style:{"padding-left":"2vw","padding-top":"3vh"}},ot=["data-content"],st={style:{}},rt=["data-content"],ct={style:{"text-align":"center"}},dt=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1))),ut={style:{"padding-left":"5vw","padding-right":"5vw"}},mt=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1))),ht={class:"",style:{"padding-left":"1vw","padding-right":"1vw"}},gt={class:"card"},_t={class:"card-body"},wt={key:0,class:"right-comment-padding"},yt=o((()=>(0,a._)("p",{style:{"text-align":"center"}},"评论",-1))),pt={style:{"font-size":"8px"}},kt=o((()=>(0,a._)("br",null,null,-1))),vt={key:0,style:{color:"#3c0ac5","font-size":"12px"}},ft=o((()=>(0,a._)("kbd",{style:{color:"rgb(231, 136, 141)"}},"我",-1))),xt={key:1,style:{color:"#3c0ac5","font-size":"12px"}},bt={style:{color:"rgb(244, 247, 247)"}},Dt={style:{"font-size":"12px"}},zt=["onClick"],It={key:0},Ct=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1))),Tt={style:{"padding-left":"1vw","padding-right":"1vw","max-height":"200px","overflow-y":"auto"}},Ut={class:"card"},At={class:"card-body"},Zt=o((()=>(0,a._)("p",{style:{"text-align":"center"}},"目录导航",-1))),Ht=["onClick"],qt={href:"#",style:{"font-size":"medium"}},$t=o((()=>(0,a._)("a",{style:{"text-decoration":"underline","font-size":"large"},href:"#wayBackTop"},[(0,a._)("code",null,"回到顶部")],-1))),Bt=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1))),Wt={class:"card"},Yt={class:"card-body"},Kt={key:0,class:"right-article-padding"},St=o((()=>(0,a._)("p",{style:{"text-align":"center"}},"作者文章推荐：",-1))),jt={style:{"padding-left":"1vw"}},Mt=["onClick"],Nt={style:{"font-size":"small"}},Ft=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1))),Vt=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1))),Et=o((()=>(0,a._)("hr",{class:"hr-wavy"},null,-1)));function Gt(t,e,l,o,Gt,Lt){const Ot=(0,a.up)("v-md-preview"),Pt=(0,a.up)("router-link");return Gt.screenWidth>=1e3?((0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",r,[c,(0,a._)("div",d,[(0,a._)("div",u,[(0,a._)("h2",m,[(0,a._)("b",null,(0,n.zw)(Gt.tittle),1)]),h,(0,a._)("hr",{class:"hr-solid-content","data-content":"作者："+Gt.author+" 热度："+Gt.article.viewCount},null,8,g),(0,a.Wm)(Ot,{text:Gt.text,ref:"preview"},null,8,["text"]),(0,a._)("hr",{class:"hr-solid-content","data-content":Lt.timestampToTime(Date.parse(new Date(Gt.article.createTime).toString()))},null,8,_),(0,a._)("div",w,[(0,a.Wm)(Pt,{style:{"text-decoration":"none",color:"black"},to:{name:"friend",query:{friendId:Gt.article.authorId}}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 作者："),(0,a._)("kbd",null,(0,n.zw)(Gt.author),1),(0,a.Uk)("  热度："),(0,a._)("mark",null,(0,n.zw)(Gt.article.viewCount),1)])),_:1},8,["to"])])])]),(0,a._)("div",y,[(0,a._)("div",p,[Gt.labels.length>0?((0,a.wg)(),(0,a.iD)("div",k,[v,f,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Gt.labels,(t=>((0,a.wg)(),(0,a.iD)("span",{key:t.id},[(0,a.Wm)(Pt,{style:{"text-decoration":"none",color:"black"},to:{name:"label_article_list",query:{labelName:t,myArticle:0}}},{default:(0,a.w5)((()=>[(0,a._)("kbd",null,(0,n.zw)(t),1)])),_:2},1032,["to"]),(0,a.Uk)("   ")])))),128))])):(0,a.kq)("",!0),x,(0,a._)("div",b,[D,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Gt.titles,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,style:(0,n.j5)({padding:`1px 0 1px ${20*t.indent}px`}),onClick:e=>Lt.handleAnchorClick(t)},[(0,a._)("a",I,[(0,a._)("code",null,(0,n.zw)(t.title),1)])],12,z)))),128)),C]),T,Gt.articleHot.length>0?((0,a.wg)(),(0,a.iD)("div",U,[A,(0,a._)("div",Z,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Gt.articleHot,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a._)("a",{href:"#",style:{color:"#5c5a5b","font-size":"medium"},onClick:e=>Lt.goto_article(t.article.articleId,t.article.authorId)},[(0,a._)("kbd",null,(0,n.zw)(t.article.tittle),1),(0,a._)("span",q,[(0,a._)("mark",null,"热度"+(0,n.zw)(t.article.viewCount),1)])],8,H)])))),128))])])):(0,a.kq)("",!0),$,t.$store.state.user.is_login?((0,a.wg)(),(0,a.iD)("div",B,[W,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Gt.comments,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a._)("a",Y,(0,n.zw)(Lt.timestampToTime(Date.parse(new Date(e.comment.createTime).toString()))),1),K,e.comment.authorId==t.$store.state.user.id?((0,a.wg)(),(0,a.iD)("a",S,[j,(0,a.Uk)("：")])):((0,a.wg)(),(0,a.iD)("a",M,[(0,a._)("kbd",N,(0,n.zw)(e.author),1),(0,a.Uk)("：")])),(0,a._)("a",F,(0,n.zw)(e.comment.comment),1),(0,a.Uk)("   "),e.comment.authorId==t.$store.state.user.id?((0,a.wg)(),(0,a.iD)("a",{key:2,onClick:t=>Lt.del_comment(e.comment.commentId),style:{color:"#3c0ac5","font-size":"12px","text-decoration":"underline"}},"删除",8,V)):(0,a.kq)("",!0)])))),128))])):(0,a.kq)("",!0),t.$store.state.user.is_login?((0,a.wg)(),(0,a.iD)("div",E,[(0,a.wy)((0,a._)("input",{placeholder:"发表个评论吧！","onUpdate:modelValue":e[0]||(e[0]=t=>Gt.comment=t),style:{float:"left",width:"70%"}},null,512),[[i.nr,Gt.comment]]),(0,a._)("button",{onClick:e[1]||(e[1]=(...t)=>Lt.send_comment&&Lt.send_comment(...t)),class:"btn btn-info btn-sm",style:{width:"30%"}},"发表")])):(0,a.kq)("",!0)])]),G])])):((0,a.wg)(),(0,a.iD)("div",L,[(0,a._)("div",O,[(0,a.Uk)(" 目录： "),P,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Gt.titles,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,style:(0,n.j5)({padding:`1px 0 1px ${20*t.indent}px`}),onClick:e=>Lt.handleAnchorClick(t)},[(0,a._)("a",Q,[(0,a._)("code",null,(0,n.zw)(t.title),1)])],12,J)))),128)),R]),X,(0,a._)("div",tt,[(0,a.Uk)(" 标签： "),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Gt.labels,(t=>((0,a.wg)(),(0,a.iD)("span",{key:t.id},[(0,a.Wm)(Pt,{style:{"text-decoration":"none",color:"black"},to:{name:"label_article_list",query:{labelName:t,myArticle:0}}},{default:(0,a.w5)((()=>[(0,a._)("kbd",null,(0,n.zw)(t),1)])),_:2},1032,["to"]),(0,a.Uk)("   ")])))),128))]),et,(0,a._)("div",lt,[(0,a._)("div",at,[(0,a._)("div",nt,[(0,a._)("h2",it,[(0,a._)("b",null,(0,n.zw)(Gt.tittle),1)]),(0,a._)("hr",{class:"hr-solid-content","data-content":"作者："+Gt.author+" 热度："+Gt.article.viewCount},null,8,ot),(0,a._)("div",st,[(0,a.Wm)(Ot,{text:Gt.text,ref:"preview",style:{width:"100%"}},null,8,["text"])]),(0,a._)("hr",{class:"hr-solid-content","data-content":Lt.timestampToTime(Date.parse(new Date(Gt.article.createTime).toString()))},null,8,rt),(0,a._)("div",ct,[(0,a.Wm)(Pt,{style:{"text-decoration":"none",color:"black"},to:{name:"friend",query:{friendId:Gt.article.authorId}}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 作者："),(0,a._)("kbd",null,(0,n.zw)(Gt.author),1),(0,a.Uk)("  热度："),(0,a._)("mark",null,(0,n.zw)(Gt.article.viewCount),1)])),_:1},8,["to"])])])])]),dt,(0,a._)("div",ut,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Gt.labels,(t=>((0,a.wg)(),(0,a.iD)("span",{key:t.id},[(0,a.Wm)(Pt,{style:{"text-decoration":"none",color:"black"},to:{name:"label_article_list",query:{labelName:t,myArticle:0}}},{default:(0,a.w5)((()=>[(0,a._)("kbd",null,(0,n.zw)(t),1)])),_:2},1032,["to"]),(0,a.Uk)("   ")])))),128))]),mt,(0,a._)("div",ht,[(0,a._)("div",gt,[(0,a._)("div",_t,[t.$store.state.user.is_login?((0,a.wg)(),(0,a.iD)("div",wt,[yt,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Gt.comments,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a._)("a",pt,(0,n.zw)(Lt.timestampToTime(Date.parse(new Date(e.comment.createTime).toString()))),1),kt,e.comment.authorId==t.$store.state.user.id?((0,a.wg)(),(0,a.iD)("a",vt,[ft,(0,a.Uk)("：")])):((0,a.wg)(),(0,a.iD)("a",xt,[(0,a._)("kbd",bt,(0,n.zw)(e.author),1),(0,a.Uk)("：")])),(0,a._)("a",Dt,(0,n.zw)(e.comment.comment),1),(0,a.Uk)("   "),e.comment.authorId==t.$store.state.user.id?((0,a.wg)(),(0,a.iD)("a",{key:2,onClick:t=>Lt.del_comment(e.comment.commentId),style:{color:"#3c0ac5","font-size":"12px","text-decoration":"underline"}},"删除",8,zt)):(0,a.kq)("",!0)])))),128))])):(0,a.kq)("",!0)])]),t.$store.state.user.is_login?((0,a.wg)(),(0,a.iD)("div",It,[(0,a.wy)((0,a._)("input",{placeholder:"发表个评论吧！","onUpdate:modelValue":e[2]||(e[2]=t=>Gt.comment=t),style:{float:"left",width:"70%"}},null,512),[[i.nr,Gt.comment]]),(0,a._)("button",{onClick:e[3]||(e[3]=(...t)=>Lt.send_comment&&Lt.send_comment(...t)),class:"btn btn-info btn-sm",style:{width:"30%"}},"发表")])):(0,a.kq)("",!0),Ct,(0,a._)("div",Tt,[(0,a._)("div",Ut,[(0,a._)("div",At,[Zt,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Gt.titles,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,style:(0,n.j5)({padding:`1px 0 1px ${20*t.indent}px`}),onClick:e=>Lt.handleAnchorClick(t)},[(0,a._)("a",qt,[(0,a._)("code",null,(0,n.zw)(t.title),1)])],12,Ht)))),128)),$t])])]),Bt,(0,a._)("div",Wt,[(0,a._)("div",Yt,[Gt.articleHot.length>0?((0,a.wg)(),(0,a.iD)("div",Kt,[St,(0,a._)("div",jt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Gt.articleHot,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a._)("a",{href:"#",style:{color:"#5c5a5b","font-size":"medium"},onClick:e=>Lt.goto_article(t.article.articleId,t.article.authorId)},[(0,a._)("kbd",null,(0,n.zw)(t.article.tittle),1),(0,a._)("span",Nt,[(0,a._)("mark",null,"热度"+(0,n.zw)(t.article.viewCount),1)])],8,Mt)])))),128))])])):(0,a.kq)("",!0)])]),Ft,Vt,Et])]))}l(7658);var Lt=l(7387),Ot=l.n(Lt),Pt=l(973),Jt=l(7879),Qt={name:"ArticePage",components:{},data(){return{text:"",titles:"",article:"",author:"匿名",tittle:"",authorId:"",articleId:"",labels:[],comments:[],articleHot:[],comment:"",screenWidth:1024}},watch:{$route:{immediate:!0,handler(){this.articleId=70,this.authorId=13,this.show_labels(this.articleId),this.show_article(this.articleId),this.get_hot_list(),this.get_comment_list(),this.loadAuthorInfo(this.authorId)}}},mounted(){this.screenWidth=window.innerWidth,console.log("屏幕宽度："+this.screenWidth)},methods:{timestampToTime(t){t=t||null;let e=new Date(t),l=e.getFullYear()+"-",a=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",n=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",i=(e.getHours()<10?"0"+e.getHours():e.getHours())+":",o=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",s=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return l+a+n+i+o+s},loadAuthorInfo(t){const e=this;t!=Jt.Z.state.user.id?t!=Jt.Z.state.friend.id?Jt.Z.dispatch("getFriendInfo",{friendId:t,success(){e.author=Jt.Z.state.friend.username},error(){e.author="作者匿名"}}):e.author=Jt.Z.state.friend.username:e.author=Jt.Z.state.user.username},del_comment(t){const e=this;Ot().ajax({url:Jt.Z.state.BaseUrl+"/api/comment/"+t,type:"delete",headers:{Authorization:"Bearer "+Jt.Z.state.user.token},success(t){1==t.code?(console.log(t),e.get_comment_list()):console.log(t)}})},send_comment(){const t=this;t.comment=t.comment.trim(),t.comment.length<=2?alert("评论不能少于两个字符"):t.comment.length>=100?alert("评论不能长于一百个字符"):Ot().ajax({url:Jt.Z.state.BaseUrl+"/api/comment/",type:"post",headers:{Authorization:"Bearer "+Jt.Z.state.user.token},data:{comment:t.comment,answerArticleId:t.articleId,authorId:Jt.Z.state.user.id},success(e){1==e.code?(console.log(e),t.comment="",t.get_comment_list()):console.log(e)}})},get_comment_list(){const t=this;Ot().ajax({url:Jt.Z.state.BaseUrl+"/api/comment/"+t.articleId,type:"get",headers:{Authorization:"Bearer "+Jt.Z.state.user.token},success(e){1==e.code?(console.log(e),t.comments=e.content):console.log(e)},error(t){console.log(t)}})},goto_article(t,e){this.articleId!=t&&Pt.Z.push({path:"/article",query:{authorId:e,articleId:t}})},handleAnchorClick(t){const{preview:e}=this.$refs,{lineIndex:l}=t,a=e.$el.querySelector(`[data-v-md-line="${l}"]`);a&&e.scrollToTarget({target:a,scrollContainer:window,top:60})},show_labels(t){const e=this;Ot().ajax({url:Jt.Z.state.BaseUrl+"/api/label/"+t,type:"get",headers:{Authorization:"Bearer "+Jt.Z.state.user.token},success(t){1==t.code?e.labels=t.content:console.log(t.content)},error(){console.log("获取标签失败")}})},show_article(t){const e=this;Ot().ajax({url:Jt.Z.state.BaseUrl+"/api/article/common/"+t,type:"GET",success(t){1==t.code?(e.text=t.content.content,e.article=t.content,e.authorId=t.content.authorId,e.tittle=t.content.tittle,console.log(t),setTimeout(e.test,1e3)):console.log("获取文章失败")},error(t){console.log(t)}})},get_hot_list(){const t=this;Ot().ajax({url:Jt.Z.state.BaseUrl+"/api/article/list/hot/1/"+t.authorId,type:"get",headers:{Authorization:"Bearer "+Jt.Z.state.user.token},success(e){t.articleHot=e.content.articleList}})},test(){const t=this.$refs.preview.$el.querySelectorAll("h1,h2,h3,h4,h5,h6"),e=Array.from(t).filter((t=>!!t.innerText.trim()));if(!e.length)return void(this.titles=[]);const l=Array.from(new Set(e.map((t=>t.tagName)))).sort();this.titles=e.map((t=>({title:t.innerText,lineIndex:t.getAttribute("data-v-md-line"),indent:l.indexOf(t.tagName)})))}},setup(){}},Rt=l(89);const Xt=(0,Rt.Z)(Qt,[["render",Gt],["__scopeId","data-v-43d2a01e"]]);var te=Xt}}]);
//# sourceMappingURL=695.8102d2bc.js.map